
valgrind --tool=memcheck --suppressions=valgrind-python.supp python3 -E -tt ./tst.py

tests for various user errors adding sessions other things

wrk -t4 -c32 -d5s http://localhost:8080/foo/bar/test/ 
Requests/sec: 118620.91

ctest/blog/fast_str -- try AVX2 or tfw's

CFLAGS='-Wall -O0 -g' sudo python setup.py build



jinja example

# Render templates in a Flask like way from a "template" directory in
# the project

from sanic import Sanic
from sanic import response
from jinja2 import Environment, PackageLoader, select_autoescape

import sys
# Enabling async template execution which allows you to take advantage
# of newer Python features requires Python 3.6 or later.
enable_async = sys.version_info >= (3, 6)


app = Sanic(__name__)

# Load the template environment with async support
template_env = Environment(
    loader=PackageLoader('jinja_example', 'templates'),
    autoescape=select_autoescape(['html', 'xml']),
    enable_async=enable_async
)

# Load the template from file
template = template_env.get_template("example_template.html")


@app.route('/')
async def test(request):
    rendered_template = await template.render_async(
        knights='that say nih; asynchronously')
    return response.html(rendered_template)


app.run(host="0.0.0.0", port=8080, debug=True)

<!DOCTYPE html>
<html lang="en">
<head>
    <title>My Webpage</title>
</head>
<body>
    <h1>Hello World</h1>
    <p>knights - {{ knights }}</p>
</body>
</html>


try:
    await asyncio.wait_for(fut, timeout=5)
except asyncio.TimeoutError:


curl -iv --raw http://localhost:8080/t6/foobar/test7/
curl -iv --raw -H "Content-Type: application/json" -X POST -d '{"username":"xyz","password":"xyz"}' http://localhost:8080/foo/bar/test/


